print "Both success and error:"

proc on.error (e) {
    print "Error: $e " <$e class>
    if (<$e class> == "exec") {
        set process <$e object>
        print "Process returned " <$process return_code>

        extract $process error | foreach line {
            print "error: $line"
        }
    } else {
        return $e
    }
}

exec ls /etc | foreach line {
    print "output: $line"
    break
}

exec ls /blurbs | foreach line {
    print "output: $line"
    break
}
